<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Bistro | Order Now</title>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/bootstrap.min.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/font-awesome.min.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/bistro-icons.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/animate.min.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/settings.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/navigation.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/owl.carousel.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='ccss/owl.transitions.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/jquery.fancybox.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/zerogrid.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/loader.css') }}">
    <link rel="shortcut icon" href="{{ url_for('static', filename='images/favicon.png') }}">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/bootstrap-datetimepicker.css') }}">

    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>

<body>

<!--Loader-->
<div class="loader">
    <div class="cssload-container">
        <div class="cssload-circle"></div>
        <div class="cssload-circle"></div>
    </div>
</div>


  <style>
        /* Custom CSS styles for the cartDetailsContainer */

#cartDetailsContainer {
    max-width: 530px;
    margin: 60px auto;
    padding: 20px;
    border-radius: 20px;
    background: linear-gradient(rgba(255, 147, 0, 0.39), #454545), url('../static/images/cart-bg.jpg');
    background-position: center;
    background-repeat: no-repeat;
    background-size: cover;
}
        .orderh{
            color: white;
            text-align: center;
            margin-top:20px;

        }
        #cartDetailsContainer h1{
                font-family: "Open Sans", sans-serif;
                font-size: 30px;
        }
        #cartDetailsContainer p{
               color:white;
                font-size: 20px
        }


        .cart {
            min-height: 100vh;
            width: 100%;
            background: linear-gradient(rgba(4, 8, 30, 0.61), rgba(4, 8, 30, 0.7)), url('../static/images/cart-bg.jpg');
            background-position: center;
            background-repeat: no-repeat;
            background-size: cover;
            margin: 20px;
            padding: 20px;
            border: none;
            border-radius: 10px;
            margin-top: 50px;
}
        #orderForm{
            padding: 20px;
            margin:20px; font-size:20px;
        }
        .form-order{
            padding: 20px;
            margin-top: 20px;

        }
        .form-order button{
        background: white;
        color: black;
        padding: 10px 10px;
        border: none;
        border-radius: 10px;
        margin: 20px;
        font-size: 20px;
        }
        .form-order button:hover{
            background-color: #ff9300;
            border-color: #ff9300;
            transition:1s;
}







/* 
#show {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        #show th, #show td {
            padding: 8px;
            text-align: center;
        }

        #show thead th {
            background-color: #f2f2f2;
        }

        #show tbody tr:nth-child(even) {
            background-color: #f2f2f2;
        }

        #show tbody tr:hover {
            background-color: #ddd;
        }
        #mybutton{
            padding: 10px 20px;
            font-size: 16px;
            border: 1px solid black;
            border-radius: 5px;
            margin: 10px;
            background-color: rgb(36, 187, 214);
        }
        #mybutton:hover {
            background-color: rgb(88, 143, 143);

        } */














@media (max-width: 768px) {
    #cartDetailsContainer {
        margin: 20px;
        margin-left: 0;
    }
}

@media (max-width: 576px) {
    #cartDetailsContainer {
        max-width: 100%;
        margin: 10px;
        padding: 10px;
    }
}
    </style>




<!--Top bar-->
<div class="topbar">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <p class="pull-left hidden-xs">bistro Healthcare Come to Expect the Best in Town</p>
                <p class="pull-right"><i class="fa fa-ambulance"></i>Order Online 111-123-6789</p>
            </div>
        </div>
    </div>
</div>

<!--Header-->
<header id="main-navigation">
    <div id="navigation" data-spy="affix" data-offset-top="20">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <nav class="navbar navbar-default">
                        <div class="navbar-header">
                            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#fixed-collapse-navbar" aria-expanded="false">
                                <span class="icon-bar top-bar"></span>
                                <span class="icon-bar middle-bar"></span>
                                <span class="icon-bar bottom-bar"></span>
                            </button>
                            <a class="navbar-brand" href="/index">
                                <img src="{{ url_for('static', filename='images/logo.png') }}" alt="logo" class="img-responsive">
                            </a>
                        </div>

                        <div id="fixed-collapse-navbar" class="navbar-collapse collapse navbar-right">
                            <ul class="nav navbar-nav">
                                <li><a href="/index">Home</a></li>
                                <li><a href="/about">About Us</a></li>
                                <li><a href="/menu">Menu</a></li>
                                <li><a href="/order">Order Now</a></li>
                                <li><a href="/donate">Donate</a></li>
                                <li><a href="/order_details">order_details</a></li>
                                <li class="dropdown">
                                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                        Account
                                        <span class="caret"></span>
                                    </a>
                                    <ul class="dropdown-menu">
                                        <li><a href="/signin">Login</a></li>
                                        <li><a href="/delete_user" id="delete-account-btn">Delete Account</a></li>
                                        <li><a href="/Update" id="update-account-btn">Update Account</a></li>
                                    </ul>
                                </li>
                            </ul>
                        </div>
                    </nav>
                </div>
            </div>
        </div>
    </div>
</header>

<!--Page header & Title-->
<section id="page_header">
    <div class="page_title">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <h2 class="title">Confirm Your Order Now!</h2>

                </div>
            </div>
        </div>
    </div>
</section>
 <section class="container mt-4">
    <div class="container">

            <div class="row">
                <div class="col-md-12">
                    <div class="cart">
                        <h1 class="orderh">Cart</h1>
                        <div id="cartDetailsContainer">

                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <div class="form-order">
                        <h2>Enter Your Details</h2>
                        <form id="orderForm">
                            <div class="form-group">
                                <label for="name">Name:</label>
                                <input type="text" class="form-control" id="name" required>
                            </div>
                            <div class="form-group">
                                <label for="email">Email:</label>
                                <input type="email" class="form-control" id="email" required>
                            </div>
                            <div class="form-group">
                                <label for="address">Address:</label>
                                <textarea class="form-control" id="address" rows="3" required></textarea>
                            </div>
                            <button type="submit" class="btn btn-primary">Place Order</button>
                        </form>

                        <div id="successMessage" style="display: none;" class="mt-4">
                            <h3>Order Placed Successfully!</h3>
                            <p>Thank you for your order.</p>
                        </div>
                    </div>
                </div>
            </div>

    </div>
</section>


    <!-- <h1>Order details</h1>
    <button id="mybutton">showOrders</button>
    <table id="show" border="2">
        <thead>
            <tr>
                <th>id</th>
                <th>Name</th>
                <th>price</th>
                <th>quantity</th>
            </tr>
        </thead>
    </table> -->

<script>
    document.addEventListener("DOMContentLoaded", function () {
        // Load cart data from localStorage
        const cartData = localStorage.getItem("cart");
        const cart = cartData ? JSON.parse(cartData) : [];

        // Function to display the cart items on the "My Order" page
        function displayCartInOrderPage() {
            const cartDetailsContainer = document.getElementById("cartDetailsContainer");

                    cartDetailsContainer.innerHTML = "";


            let totalAmount = 0;

            cart.forEach(item => {
                if (item && item.name && item.price && item.quantity) {
                    const itemElement = document.createElement("div");

                    itemElement.style.padding = "30px";
                    itemElement.style.marginBottom = "20";

                    itemElement.innerHTML = `
                           <h1 style="font-size: 24px; font-weight: bold;color:white">Item Detail</h1>
                            <p style="margin: 5px 0;"><strong>Name:</strong> ${item.name}</p>
                            <p style="margin: 5px 0;"><strong>Price:</strong> $${item.price}</p>
                            <p style="margin: 5px 0;"><strong>Quantity:</strong> ${item.quantity}</p>

                        `;
                    cartDetailsContainer.appendChild(itemElement);

                    const subtotal = item.price * item.quantity;
                    totalAmount += subtotal;
                }
            });

            const totalElement = document.createElement("div");
            totalElement.innerHTML = `<p>Total Amount: $${totalAmount.toFixed(2)}</p>`;
            cartDetailsContainer.appendChild(totalElement);
        }

        // Call the function to display the cart items on page load
        displayCartInOrderPage();


        // Handle the form submission to place the order
        const orderForm = document.getElementById("orderForm");
        orderForm.addEventListener("submit", function (event) {
            event.preventDefault();

            // Get user details
            const name = document.getElementById("name").value;
            const email = document.getElementById("email").value;
            const address = document.getElementById("address").value;

            // Get the cart data from localStorage
            const cartData = localStorage.getItem("cart");
            const cart = cartData ? JSON.parse(cartData) : [];

            // Check if the cart is empty before proceeding with the order
            if (cart.length === 0) {
                alert("Your cart is empty. Please add items to the cart before placing an order.");
                return;
            }

            // Prepare the data to be sent in the request body
            const data = {
                name: name,
                email: email,
                address: address,
                cart: cart
            };

            // Send the data to the Flask endpoint
            fetch("/save_cart", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify(data)
            })
                .then(response => response.json())
                .then(data => {
                    console.log(data.message);
                    // Optionally, you can show a success message here
                })
                .catch(error => {
                    console.error("Error saving cart data:", error);
                });

            // Clear the cart and localStorage
            cart.length = 0;
            localStorage.removeItem("cart");

            // Hide the order form and show the success message (if needed)
            orderForm.style.display = "none";
            const successMessage = document.getElementById("successMessage");
            successMessage.style.display = "block";
        });
    });

// Assuming you have a button with an id 'delete-account-btn' that triggers the account deletion
document.getElementById('delete-account-btn').addEventListener('click', function () {
            // Perform an asynchronous request to the Flask route for deleting the user
            fetch('/delete_user')
                .then(response => response.json())
                .then(data => {
                    if (data.message) {
                        alert('Account deleted successfully!');
                        // Redirect to a new page or perform any other actions after successful deletion
                        // window.location.href = '/'; // Example redirect to the home page
                    } else {
                        alert('Failed to delete user data. Please try again.');
                    }
                })
                .catch(error => {
                    alert('An error occurred while deleting user data.');
                    console.error(error);
                });
        });
         // Assuming you have a button with an id 'update-account-btn' that triggers the account deletion
         document.getElementById('update-account-btn').addEventListener('click', function () {
            // Perform an asynchronous request to the Flask route for deleting the user
            fetch('/delete_user')
                .then(response => response.json())
                .then(data => {
                    if (data.message) {
                        alert('Account updated successfully!');
                        // Redirect to a new page or perform any other actions after successful deletion
                        // window.location.href = '/'; // Example redirect to the home page
                    } else {
                        alert('Failed to update user data. Please try again.');
                    }
                })
                .catch(error => {
                    alert('An error occurred while updating user data.');
                    console.error(error);
                });
        });


    // order_details
    // var myData;
    //     var table; // DataTables instance
        
    //     // Moved the initialization outside of the click event handler
    //     $(document).ready(function() {
    //         table = $('#show').DataTable({
    //             columns: [
    //                 { data: 'id' },
    //                 { data: 'name' },
    //                 { data: 'price' },
    //                 { data: 'quantity' },
    //             ]
    //         });
    //     });

    //     $(document.body).on('click', "#mybutton", function (e) {
    //         console.log("hello");
    //         $.ajax({
    //             type: "GET",
    //             url: "/api/order_details",
    //             success: function (response) {
    //                 myData = response;
    //                 console.log(myData);
    //                 if (myData != null && myData.length > 0) {
    //                     // Clear existing data before adding new data
    //                     table.clear();
    //                     table.rows.add(myData);
    //                     table.draw();
    //                 }
    //             },
    //             error: function (xhr, resp, text) {
    //                 console.log(xhr, resp, text);
    //             }
    //         });
    //     });
</script>


<!--Footer-->
<footer class="padding-top bg_black">
    <div class="container">
      <div class="row">
        <div class="col-md-3 col-sm-6 footer_column">
          <h4 class="heading">Who are we?</h4>
          <hr class="half_space">
          <p class="half_space"></p>
          <p>
              Welcome to JKS, a culinary haven nestled in the heart of Lahore. Indulge in a vibrant fusion of flavors. At our resturant, we pride ourselves on crafting a memorable dining experience.
              Immerse yourself in our warm and inviting atmosphere, where exceptional service meets exquisite flavors.
          </p>
        </div>
        <div class="col-md-3 col-sm-6 footer_column">
          <h4 class="heading">Quick Links</h4>
          <hr class="half_space">
          <ul class="widget_links">
            <li><a href="/index">Home</a></li>
            <li><a href="/about">About Us</a></li>
              <li><a href="/menu">Menu</a></li>
              <li><a href="/order">Order Now</a></li>
            <li><a href="/donate">Donate</a></li>
  
            <!-- <li><a href="./account/register.php">Order Now</a></li> -->
            
          </ul>
        </div>
        <div class="col-md-3 col-sm-6 footer_column">
          <h4 class="heading">Newsletter</h4>
          <hr class="half_space">
          <p class="icon"><i class="icon-dollar"></i>Sign up with your name and email to get updates fresh updates.</p>
          <div id="result1" class="text-center"></div>        
          
         <form action="http://themesindustry.us13.list-manage.com/subscribe/post-json?u=4d80221ea53f3a4487ddebd93&id=494727d648&c=?" method="get" onSubmit="return false" class="newsletter">
            <div class="form-group">
              <input type="email" placeholder="E-mail Address" required name="EMAIL" id="EMAIL" class="form-control" />
            </div>
            <div class="form-group">
              <input type="submit" class="btn-submit button3" value="Subscribe" />
            </div>
          </form>
        </div>
        <div class="col-md-3 col-sm-6 footer_column">
          <h4 class="heading">Get in Touch</h4>
          <hr class="half_space">
          <p></p>
          <p class="address"><i class="icon-location"></i>JKS, Opposite S.L.Raheja Hospital, Mahim Causeway, Mahim (West), Lahore.</p>
          <p class="address"><i class="fa fa-phone"></i>(+91) 892 808 5056</p>
          <p class="address"><i class="icon-dollar"></i><a href="office@jks.com">office@jks.com</a></p>
        </div> 
      </div>
      <div class="row">
       <div class="col-md-12">
          <div class="copyright clearfix">
            <p>Copyright &copy; 2023 JKS. All Right Reserved</p>
            <ul class="social_icon">
                 <li><a href="#" class="facebook"><i class="icon-facebook5"></i></a></li>
                 <li><a href="#" class="twitter"><i class="icon-twitter4"></i></a></li>
                 <li><a href="#" class="google"><i class="icon-google"></i></a></li>
                </ul>
          </div>
        </div>
      </div>
    </div>
  </footer>
<a href="#." id="back-top"><i class="fa fa-angle-up fa-2x"></i></a>



<script src="{{ url_for('static', filename='js/jquery-2.2.3.js') }}" type="text/javascript"></script>
<script src="{{ url_for('static', filename='js/bootstrap.min.js') }}" type="text/javascript"></script>
<script src="{{ url_for('static', filename='js/jquery.themepunch.tools.min.js') }}"></script>
<script src="{{ url_for('static', filename='js/jquery.themepunch.revolution.min.js') }}"></script>
<script src="{{ url_for('static', filename='js/revolution.extension.layeranimation.min.js') }}"></script>
<script src="{{ url_for('static', filename='js/revolution.extension.navigation.min.js') }}"></script>
<script src="{{ url_for('static', filename='js/revolution.extension.parallax.min.js') }}"></script>
<script src="{{ url_for('static', filename='js/revolution.extension.slideanims.min.js') }}"></script>
<script src="{{ url_for('static', filename='js/revolution.extension.video.min.js') }}"></script>
<script src="{{ url_for('static', filename='js/slider.js') }}" type="text/javascript"></script>
<script src="{{ url_for('static', filename='js/owl.carousel.min.js') }}" type="text/javascript"></script>
<script src="{{ url_for('static', filename='js/jquery.parallax-1.1.3.js') }}"></script>
<script src="{{ url_for('static', filename='js/jquery.mixitup.min.js') }}"></script>
<script src="{{ url_for('static', filename='js/jquery-countTo.js') }}"></script>
<script src="{{ url_for('static', filename='js/jquery.appear.js') }}"></script>
<script src="{{ url_for('static', filename='js/jquery.fancybox.js') }}"></script>
<script src="{{ url_for('static', filename='js/functions.js') }}" type="text/javascript"></script>

</body>
</html>


